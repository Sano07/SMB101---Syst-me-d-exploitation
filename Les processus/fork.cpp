/**
 * \file fork.cpp
 * \brief Unité SM101 : Système d'exploitation - Séance 1 : Les processes
 * \author Sébastien Marié
 * \version 0.1
 * 
 *  Source : https://www.tala-informatique.fr/wiki/index.php?title=C_fork
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>

/** 
 * \fn int main (void)
 * \brief fonction traitement principale
 * 
 * 
 * \return EXIT_SUCCESS - Arrêt normal du programme
 * \return EXIT_FAILURE - Arrêt avec anomalie du programme
 */
int main() {
	
    // Création d'un nouveau processus duplicant le processus principal
    pid_t pid = fork();
	
    //Echec de création du fils
    if (pid == -1) {

		perror(errno);
		
        return EXIT_FAILURE;
	} 
    //Affichage du PID père et affichage du PID fils
    else if (pid == 0) {
        
		printf("Mon PID est %i et celui de mon père est %i\n", getpid(), getppid());
	}
    //Affichage du PID maitre et affichage du PID fils
    else {

		printf("Mon PID est %i et celui de mon fils est %i\n", getpid(), pid);
	}

	return EXIT_SUCCESS;
}